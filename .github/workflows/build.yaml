name: build

on:
  push:
    branches:
      - main

jobs:
  build_package:
    uses: bitcompat/base/.github/workflows/build.yaml@main
    with:
      name: main
      build-args: |
        RUN_TESTS=1
      image_tag: |
        latest
        0.16-20220414-bullseye-r1 # renovate: datasource=github-tags depName=json-c/json-c extractVersion=^json-c-(?<major>\d+)\.(?<minor>\d+)-(?<patch>\d+)$
        0.16-bullseye-r1 # renovate: datasource=github-tags depName=json-c/json-c extractVersion=^json-c-(?<major>\d+)\.(?<minor>\d+)-(?<patch>\d+)$
        0.16-bullseye # renovate: datasource=github-tags depName=json-c/json-c extractVersion=^json-c-(?<major>\d+)\.(?<minor>\d+)-(?<patch>\d+)$
        0.16 # renovate: datasource=github-tags depName=json-c/json-c extractVersion=^json-c-(?<major>\d+)\.(?<minor>\d+)-(?<patch>\d+)$
    secrets: inherit
